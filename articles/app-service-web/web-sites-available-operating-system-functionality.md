---
ms.openlocfilehash: 3423085e510383bf34a33cb31917e5ed07156120
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties 
    pageTitle="在 Azure 应用程序服务 Web 应用程序的操作系统功能" 
    description="了解到 Azure 应用程序服务 web 应用程序可用的操作系统功能" 
    services="app-service\web" 
    documentationCenter="" 
    authors="cephalin" 
    manager="wpickett" 
    editor="mollybos"/>

<tags 
    ms.service="app-service-web" 
    ms.workload="web" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="07/02/2015" 
    ms.author="cephalin"/>

# 在 Azure 应用程序服务 Web 应用程序的操作系统功能 #

本文介绍了可供在[Azure 应用程序服务](http://go.microsoft.com/fwlink/?LinkId=529714)Web 应用程序上运行的所有应用程序的通用基准操作系统功能。 此功能包括文件、 网络和注册表访问和诊断日志和事件。 

<a id="tiers"></a>
## 应用程序服务计划层

Web 应用程序在多租户的宿主环境中运行客户应用程序。 **免费**和**共享**层中部署 web 应用程序运行在工作进程中共享的虚拟机，而专门针对与单个客户关联的 web 应用程序的虚拟机上运行的 web 应用程序部署中的**标准**和**特优**层。

因为 Web 应用程序支持不同层之间的无缝扩展体验，对 web 应用程序强制执行的安全配置保持不变。 这将确保，web 应用程序不突然的行为方式不同，web 应用程序切换到另一层时以意想不到的方式失败。

<a id="developmentframeworks"></a>
## 开发框架

Web 应用程序层来控制对 web 应用程序可用的计算资源 （CPU、 磁盘存储、 内存和网络出口） 的量。 但是，框架功能对应用程序可用的广度保持不变而不考虑扩展层。

Web 应用程序支持多种开发框架，包括 ASP.NET、 传统的 ASP，node.js，PHP 和 python-所有这些作为扩展 IIS 中运行。 为了简化和标准化的安全配置，Web 应用程序通常使用默认设置运行各种开发框架。 一种方法来配置 web 应用程序可能已经自定义的 API 的表面积和个人发展的每种框架的功能。 Web 应用程序而使 web 应用程序开发框架无论操作系统功能的通用基准采用了更具一般性的做法。

以下各节概述供在 Azure 上的 web 应用程序的操作系统功能的一般类型。

<a id="FileAccess"></a>
##文件访问

在 Web 应用程序，包括本地驱动器和网络驱动器中存在不同的驱动器。

<a id="LocalDrives"></a>
### 本地驱动器

其核心，Web 应用程序是在 Azure PaaS （平台即服务） 基础结构上运行的服务。 因此，"附加"到虚拟机的本地驱动器是同一类型的驱动器可供任何在 Azure 上运行的辅助角色。 这包括操作系统驱动器 （D:\ 驱动器），应用程序包含驱动器，Azure 包 cspkg 文件以独占方式使用 Web 应用程序 （和客户无法访问） 和"用户"驱动器 （C:\ 驱动器），其大小 VM 的大小而异。

<a id="NetworkDrives"></a>
### 网络驱动器 （亦即 UNC 共享）

使 web 应用程序部署和维护简单的 Web 应用程序的唯一方面之一是，将用户的所有内容都存储在 UNC 共享的一组。 这种模型非常很好地映射到内部 web 宿主环境中有多个负载平衡的服务器所使用的内容存储的常见模式。 

在 Web 应用程序中有编号的每个数据中心中创建的 UNC 共享。 在每个数据中心中的所有客户的用户内容的百分比分配到每个 UNC 共享。 此外，所有内容的单个客户的订阅软件始终置于同一 UNC 文件共享。 

请注意，由于如何云服务的工作，负责主持 UNC 共享特定的虚拟机将改变随着时间的推移。 它被保证 UNC 共享将装入不同的虚拟机中，如云操作正常期间进入向上和向下。 由于这个原因，web 应用程序永远不会应进行硬编码的假设，随着时间的推移将保持其不稳定的 UNC 文件路径中的计算机信息。 相反，他们应该使用方便*仿* **D:\home\site** Web 应用程序提供的绝对路径。 此仿绝对路径提供引用到自己的应用程序的可移植、 应用程序和用户限的方法。 通过使用**D:\home\site**，一个可以传输共享的文件的应用程序到应用程序而无需为每个传输配置新的绝对路径。

<a id="TypesOfFileAccess"></a>
### 向 web 应用程序授予的文件访问权限的类型

每个客户的预订已在数据中心内特定 UNC 共享上保留的目录结构。 一个客户可能有多个 web 应用程序在特定的数据中心中，创建，因此所有属于单个客户订购目录创建相同的 UNC 共享。 此共享可能包括例如那些内容、 错误和诊断日志和更早版本创建的源代码管理的 web 应用程序的目录。 如预期的那样，客户的 web 应用程序目录是用于读取和写入访问在运行时由 web 应用程序的应用程序代码中。

连接到虚拟机中运行 web 应用程序的本地驱动器，在 Web 应用程序保留一块 C:\ 的特定于应用程序的临时存储驱动器上的空间。 尽管 web 应用程序具有完全的读写访问自己临时的本地存储区，该存储实际上并不能由应用程序代码中直接使用。 相反，目的是要为 IIS 和 web 应用程序框架提供临时文件存储。 Web 应用程序也将限制可用于每个 web 应用程序，以防止单个应用程序消耗过多的本地文件存储的临时本地存储量。

两个示例的 Web 应用程序如何使用临时的本地存储区会临时 ASP.NET 文件的目录和 iis 目录压缩的文件。 ASP.NET 编译系统作为临时编译缓存位置使用"临时 ASP.NET 文件"目录。 IIS 使用"IIS 临时压缩文件"目录来存储压缩的响应输出。 这两种类型的文件使用情况 （以及其他） 是为每个应用程序的临时本地存储在 Web 应用程序中重新映射。 这种重新映射，可以确保功能将继续进行。

作为名为"应用程序池标识"，进一步介绍随机唯一的低权限工作进程标识运行在 Web 应用程序中的每个应用程序︰ [http://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)。 应用程序代码使用此标识基本操作系统驱动器 （D:\ 驱动器） 的只读访问权限。 这意味着应用程序代码可以列出常用的目录结构和常见操作系统的系统驱动器上的文件中读取。 虽然这看起来是有点宽泛的访问、 相同的目录和文件都可以访问，当您配置工作者角色在 Azure 托管服务和读取驱动器的内容。 

<a name="multipleinstances"></a>
### 跨多个实例的文件访问

主目录包含应用程序的内容和 web 应用程序可以向其写入。 如果在多个实例上运行 web 应用程序，以便所有实例，请都参阅位于同一个目录所有实例中共享主目录。 因此，例如，如果 web 应用程序保存到主目录上载的文件，这些文件是立即可用于所有实例。 

<a id="NetworkAccess"></a>
## 网络访问
应用程序代码可以使用 TCP/IP 和基于 UDP 协议进行出站网络连接到外部服务公开的互联网访问终结点。 应用程序可以使用这些相同的协议连接到 Azure 成本 / 收益分析中; 例如，通过建立 HTTPS 连接到 SQL Azure 服务。

也是一个有限的功能为应用程序建立一个本地环回连接，并将在该本地回环的套接字上侦听的应用程序。 此功能存在主要是为了使应用程序在本地环回套接字上侦听作为其功能的一部分。 请注意每个客户的应用程序中看到的"私有"环回连接;应用程序的"A"无法侦听到本地环回套接字建立的应用程序"B"。

命名的管道还支持作为共同运行 web 应用程序的不同进程之间的进程间通信 (IPC) 机制。 例如，IIS FastCGI 模块依赖于命名管道来协调运行 PHP 页面的单个进程。


<a id="Code"></a>
## 执行代码、 进程和内存
如前所述，web 应用程序运行在低权限工作进程使用一个随机应用程序池标识。 应用程序代码可以访问与工作进程，以及通过 CGI 进程或其他应用程序可能产生任何子进程相关联的内存空间。 但是，一个客户的 web 应用程序无法访问内存或另一个客户的 web 应用程序的数据，即使是在同一个虚拟机上。

应用程序可以运行脚本或使用受支持的 web 应用程序开发框架编写的页面。 Web 应用程序未配置任何 web 应用程序框架设置为更多的限制模式。 例如，在 Web 应用程序上运行的 ASP.NET 应用程序在"完全"信任而不是更受限制的信任模式下运行。 应用程序框架，包括经典 ASP 和 ASP.NET，可以调用像注册默认情况下，在 Windows 操作系统上的 ADO （ActiveX 数据对象） 进程内 COM 组件 （但未出的进程 COM 组件）。

Web 应用程序可以生成并运行任意代码。 它是 web 应用程序执行操作，例如生成命令行解释器或运行 PowerShell 脚本允许的。 不过，即使从 web 应用程序，可以产生任意代码和过程，可执行程序和脚本也仍为父应用程序池所授予的权限。 例如，web 应用程序可以生成进行出站 HTTP 调用，可执行文件，但同一可执行文件不能试图解除绑定的虚拟机从其 NIC 的 IP 地址 进行出站网络调用允许低权限的代码，但尝试重新配置虚拟机上的网络设置需要管理特权。


<a id="Diagnostics"></a>
## 诊断日志和事件
日志信息是另一套某些 web 应用程序尝试访问的数据。 日志信息可用于在 Web 应用程序中运行的代码的类型包括诊断和日志生成 web 应用程序，也是能够方便地访问 web 应用程序的信息。 

例如，W3C HTTP 活动的 web 应用程序所生成的日志的可用日志目录中创建或 blob 存储在 web 应用程序中，如果客户已设置了 W3C 日志记录存储到网络共享位置上。 第二种选项使大量的日志收集不超过与网络共享文件存储限制的风险。

在相同的脉络，.NET 应用程序中的实时诊断信息可以还会记录的.NET 跟踪和诊断的基础结构，使用选项将跟踪信息写入任一 web 应用程序的网络共享上，或者到 blob 存储位置。

区域不可用在 Azure 上的 web 应用程序的诊断日志记录和跟踪是 Windows ETW 事件和公共 Windows 事件日志 （例如系统、 应用程序和安全事件日志）。 由于 ETW 跟踪信息可能会查看计算机范围 （具有权限 Acl），阻止读取和写入 ETW 事件。 开发人员可能会注意到的 API 调用来读取和写入 ETW 事件和常见的 Windows 事件日志看起来有效，但这是因为 WEb 应用程序"欺骗"调用，以便它们看起来是成功。 事实上，web 应用程序代码不具有访问此事件的数据。

<a id="RegistryAccess"></a>
## 注册表访问
应用程序可以只读访问很多 （尽管不是全部） 的虚拟机运行的注册表。 在实践中，这意味着允许本地用户组为只读访问权限的注册表项都可以访问 web 应用程序。 当前不支持以进行读取或写入访问权限的注册表的一个领域是 HKEY\_当前\_用户配置单元。

阻止对注册表的写入访问权限，包括对每个用户的任何注册表项的访问。 从应用的角度，对注册表的写访问权限应永远不会依赖在云环境中由于应用程序可以 （和执行） 不同的虚拟机之间进行迁移。 可以通过 web 应用程序依赖于只有永久可写入的存储是存储在 Web 应用程序的 UNC 共享上的每个应用程序内容的目录结构。 

>[AZURE.NOTE] 如果您想要怎样的 Azure 帐户之前开始使用 Azure 应用程序服务，请转到[尝试应用程序服务](http://go.microsoft.com/fwlink/?LinkId=523751)，立即可以在此创建短期的初学者 web 应用程序在应用程序服务。 没有信用卡，所需;没有承诺。

[AZURE.INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]
 
 
测试
