---
ms.openlocfilehash: 470c2625695fb449da57954ebd912a8450cdbab9
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties 
    pageTitle="分析客户改动使用机器学习 |Microsoft Azure" 
    description="开发集成分析和评分客户流失模型的案例研究" 
    services="machine-learning" 
    documentationCenter="" 
    authors="jeannt" 
    manager="paulettm" 
    editor="cgronlun"/>

<tags 
    ms.service="machine-learning" 
    ms.workload="data-services" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="07/02/2015" 
    ms.author="jeannt"/>

# 通过使用 Azure 机器学习分析客户改动

##概述
本主题提供使用 Azure 机器学习 Studio 生成的客户流失分析项目的参考实现。 它讨论了为全面解决工业客户流失的问题相关联的类属模型。 我们还度量生成使用机器学习的模型的准确性，我们评估进一步开发的方向。  

### 致谢
本实验是开发和测试 Serge 高阳，在 Microsoft，Princial 数据科学家，Roger Barga，Microsoft Azure 机器学习以前产品经理。 Azure 文档小组感谢并与其共享此白皮书中的经验教训。

[AZURE.INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)] 

##客户流失问题
企业在消费市场和企业的所有扇区都有处理改动。 有时流失过多，会影响决策。 传统的解决方案是预测高仍然 churners 和满足其需要通过接待服务，市场营销活动，或通过应用特殊的 dispensations。 这些方法可以不同行业与行业之间甚至特定使用者群集到另一个行业 （如电信） 内。 

常见的因素是企业需要这些特殊的客户保留工作减至最少。 因此，是改动的一种自然方法得分的可能性与每一位客户并解决前 N 的。 顶级客户可能最具盈利能力的;例如，在更复杂的情况下，利润函数期间适合特殊的 dispensation 的选择采用。 但是，这些考虑事项是只改动处理整体战略的一部分。 企业还必须考虑客户风险 （和相关联的风险容差） 的级别和成本的干预和貌似合理的客户细分。  

##业展望和方法
改动的精密的处理是成熟行业的一个信号。 典型的示例是电信行业的订阅服务器都已知经常从一个提供程序切换到另一个。 此自愿流失是最关心的问题。 此外，提供积累重要知识有关*改动驱动程序*，这些因素该驱动器的客户可以切换。 

例如，话筒或设备的选择是改动的已知驱动程序，在移动电话业务。 因此，常用策略是 subsidize 耳机的价格为新的订阅服务器和充电现有客户升级到全价。 从历史上看，此策略将导致客户从一个提供商跳跃到另一个新的优惠，反过来，具有提示您提供程序用来调整他们的战略。 

在手机产品中的高波动性是很快使无效，根据当前的手机机型流失模型的因素。 此外，手机不是只有电信设备;他们也方式 （考虑 iPhone） 语句，并且这些社交的预测值是正则的电信数据集的范围之外。 

用于建模的最终结果是，您不能只是通过消除已知的原因流失设计合理的策略。 事实上，连续的建模策略，其中包括量化分类变量 （如决策树） 的经典模型是**必需**的。

在他们的客户使用大数据集，组织正在执行大数据分析 （具体说来，基于大数据的改动检测），作为一个有效的方法，这一问题。 您可以找到更多有关大数据方法对 ETL 部分建议中流失的问题。  

##客户流失模型的方法
共同解决问题的过程来解决客户流失被描绘在图 1-3:  

1.  风险模型可以考虑操作对概率和风险的影响。
2.  干预模型允许您考虑如何干预程度可能会影响流失的客户量的可能性生命周期价值 (CLV)。
3.  这种分析人士呈报到主动的市场营销活动面向的客户群，提供最佳服务的定性分析。  

![][1]

此向前外观的方法是将改动，最好的办法，但它附带了复杂性︰ 我们必须要开发多模型的原型和模型之间的跟踪依赖项。 可以封装模型间的交互，如下面的关系图中所示︰  

![][2]
 
*图 4︰ 统一多模型的原型*  

如果我们还想为留住客户提供全方位的做法，模型之间的交互是关键。 每个模型一定会降低随着时间;因此，该体系结构是隐式的 （类似于通过明快 DM 数据挖掘标准，[***3***] 设置原型） 循环。  
 
市场营销决策风险的分段/分解的整个周期仍然是一个通用的结构，适用于许多业务问题。 改动分析是只是这一组问题的强代表，因为它表现出的复杂的业务问题，不允许简化预测解决方案的所有特点。 若要改动的现代方法的社会方面不会特别突出显示在方法中，但社交方面封装在建模原型，而会在任何模型。  

一个有趣的补充是大数据分析。 目前的电信和零售企业收集详尽的数据，他们的客户，我们可以很容易地预见对多模型连接的需要将成为普遍的趋势，给出新兴的趋势，例如互联网的内容和普遍的设备，使企业能够使用智能解决方案在多个图层。  

 
##在机器学习 Studio 中实现建模原型 
由于刚才所述的问题，如何可以我们实施一个集成的建模和计分方法？ 在本节中，我们将展示我们完成这使用 Azure 机器学习 Studio。  

多模型方法全局改动为原型设计时是必不可少的。 即使评分 （预测） 的部分方法应该是多模型。  

下图显示我们创建的它采用了四种计分算法在计算机学习 Studio 预测改动的原型。 使用一种多模型方法的原因不仅是为了创建 ensemble 分类器，从而提高准确性，但也要防止过度拟合并提高规范性功能选择。  

![][3]
 
*建模方法改动的图 5︰ 原型*  

以下各节提供有关评分模型，我们实施了通过机器学习 Studio 原型的更多详细信息。  

###数据的选择和准备
数据用来构建模型和分数客户进行模糊处理，以保护客户隐私的数据来自 CRM 垂直解决方案。 数据中包含有关在美国，8000 订阅的信息，它结合了三个来源︰ 提供 （订阅元数据） 的数据、 活动数据 （使用的系统），以及客户支持数据。 数据不包括任何业务相关信息的客户;例如，它不包括会员的元数据或信用分数。  

为简单起见，ETL 和数据清理过程超出范围因为我们假定数据准备工作已经被完成在其他地方。   

初步重要性评分的预测值，使用随机林模块过程中的一套基于建模的功能选择。 对于机器学习 Studio 中的实现，我们可以计算平均值、 中间值和具有代表性的功能范围。 例如，我们添加了一些定性的数据，如用户活动的最小值和最大值的聚合函数。    

我们还会捕获最近六个月的临时信息。 我们一年时间分析数据，我们确定了即使没有统计方面的重大趋势，改动的效果将大打折扣后六个月。  

最重要的一点是在机器学习 Studio，使用 Microsoft Azure 中的数据源中已实现了整个过程，包括 ETL，功能选择和建模。   

以下关系图演示了使用的数据。  

![][4]
 
*图 6︰ 节选内容的数据源 （混淆）*  

![][5]

 
*图 7︰ 从数据源中提取的特征*
 
> 请注意，此数据是私有的因此不能共享的模型和数据。 
> 但是，相似模型中使用公开提供的数据，请参阅此试验中[模型库](http://gallery.azureml.net/)的示例︰[电信客户改动](http://gallery.azureml.net/Experiment/31c19425ee874f628c847f7e2d93e383)。
> 

###在原型中使用的算法

我们用下面的四个机器学习算法来构建原型 （没有自定义项）︰  

1.  物流回归 (LR)
2.  提升的决策树 (BT) 
3.  平均的 perceptron (AP) 
4.  支持向量机 (SVM)  


下图演示实验设计图面上，它表示在其中创建模型的序列的一部分︰  

![][6]  

 
*图 8︰ 在机器学习 Studio 中创建模型*  

###计分方法
我们通过使用已标记的训练集计分的四个机型。  

我们还提交评分比较模型使用 SAS 企业挖掘程序 12 的桌面版生成的数据集。 我们测量了 SAS 模型和所有四个机器学习 Studio 模型的准确性。  

##结果 
在本节中，我们将提供我们的研究结果有关的模型，根据评分数据集的准确性。  

###准确性和精度的评分
通常情况下，在机器学习中的实现 SAS 背后是 （区域下曲线或 AUC） 大约是 10-15%的准确率。  

但是，改动中最重要的指标是 misclassification 率︰ 即的分类器预测作为前 N churners，其中哪些实际未**不**流失，和尚未收到特殊处理？ 下面的关系图将所有型号此 misclassification 率进行比较︰  

![][7]

 
*图 9: Passau 原型区域下曲线* 

###使用 AUC 进行比较的结果
下曲线区域 (AUC) 是独立性的一个表示全局*独立性*之间的积极的和消极的人口数的分数分布测量的指标。 类似于传统的接收器运算符特征 （台湾） 图中，但一个重要的区别是，AUC 规格，不需要您选择阀值。 相反，它总结结果通过**所有**可能的选项。 与此相反，传统台湾关系图上的垂直轴和误报率之所以在水平轴上的显示正率和分类阈值而异。   

AUC 通常用于作为价值的衡量标准不同的算法 （或不同的系统） 因为它允许通过其 AUC 值进行比较的模型。 这是 meteorology biosciences 等行业中一种流行的方法。 因此，AUC 表示分类器的性能评估的常用工具。  

###比较 misclassification 率
我们使用的 CRM 数据大约 8000 订阅的比较问题数据集上的 misclassification 率。  

-   SA misclassification 率是 10-15%。
-   机器学习 Studio misclassification 速率是 200-300 顶部 churners 的 15-20%。  

在电信行业中，很重要，以解决有改动通过提供接待服务或其他特殊处理的高风险的客户。 在这方面，机器学习 Studio 实现能达到那样的 SAS 模型的结果。  

出于同样的原因，准确性是比精度更重要，因为我们最感兴趣正确分类可能 churners。  

维基百科从下的图描述了一个生动、 易于理解的图形中的关系︰  

![][8]
 
*图 10︰ 准确性和精度之间的权衡*

###提升的决策树模型的的准确性和精度结果  

下面的图表显示原始结果评分对于提升的决策树模型，正好是最准确的四种模型中使用机器学习原型︰  

![][9]

*图 11︰ 提升的决策树模型特征*

##性能比较 
我们比较数据评定使用机器学习 Studio 模型和比较模型通过使用 SAS 企业挖掘程序 12.1 桌面版创建的速度。  

下表总结了这些算法的性能︰  

*表 1。 一般的算法的性能 （精确）* 

**LR**| **BT**| **接入点**| **SVM**|
--|--|--|--|
平均模型|  最佳的模型| 性能下降|    平均模型

在 15-25%执行，但准确性的速度为 outperformed 的 SA 已很大程度等同的机器学习 Studio 中承载模型。  

##讨论和建议
在电信行业，已形成几种做法分析改动，其中包括︰  

-   类派生指标四个基本类别︰
    -   **实体 （例如，订阅）**。 设置订阅和/或客户流失的主题有关的基本信息。
    -   **活动**。 获取与实体，例如，登录次数相关的所有可能的用法信息。
    -   **客户支持**。 获取指示是否订阅有问题或与客户支持的交互的客户支持日志中的信息。 
    -   **竞争和业务数据**。 获取有关客户可能的任何信息 （例如，可以是不可用或难以跟踪）。
-   使用对驱动器功能选择的重要性。 这意味着提升的决策树模型始终是一种有前景的方法。  

使用先前的四个类别的错觉简单*确定性*方法，基于索引形成合理的因素，每个类别，应我们只是要识别客户面临的流失风险。 遗憾的是，尽管此概念看上去貌似合理，却是假的了解。 原因是，改动是临时的效果，造成要改动的因素通常是在瞬态。 什么导致客户考虑今天离开可能不同明天，肯定会另六个月内从现在。 因此，*概率*模型是必不可少的。  
 
这一重要结果经常被忽略在业务中，通常首选商业智能面向的方法分析，主要是因为它是一种易，销售，和承认简单自动化。  

但是，通过使用机器学习 Studio 自助分析的承诺是信息的四种类别，评分由部门或部门，成为改动有关机器学习的宝贵来源。  
 
预计在 Azure 机器学习的另一个令人兴奋功能是能够将自定义模块添加到已提供的预定义模块的存储库。 这一功能，本质上，创造了机会，选择库并为垂直市场创建模板。 它是 Azure 机器学习在市场中重要的优势。  

我们希望继续本主题以后，特别是与大数据分析。
  
##结论
本文介绍了处理常见的客户流失问题通过一个通用框架，一个明智的做法。 我们认为评分模型的原型，并通过使用 Azure 机器学习来实现它。 最后，我们评估的准确性和原型解决方案就在 SAS 的同类算法的性能。  

**详细信息︰**  

本文没有帮您吗？ 请给我们您的反馈意见。 5 （极好） 范围为 1 （较差） 上告诉我们，您如何评价本白皮书和为什么您赋予它此分级？ 例如︰  

-   您评价高由于具有很好的示例，出色的屏幕截图，清除编写或其他原因吗？ 
-   您评价低差示例、 模糊屏幕抓图，或不清楚的书写？  

这种反馈将帮助我们提高我们发布的白皮书的质量。   

[发送反馈](mailto:sqlfback@microsoft.com)。
 
##参考
[1]预测分析︰ 超出预测，西部 McKnight，信息管理，7 月/8 月 2011 年，p.18-20。  

[2][的准确性和精度](http://en.wikipedia.org/wiki/Accuracy_and_precision)在维基百科上 
 
[3][明快 DM 1.0︰ 分步数据挖掘手册](http://www.the-modeling-agency.com/crisp-dm.pdf)   

[4]大数据营销  

[5][大数据营销︰ 更有效地让您的客户和创造价值](http://www.amazon.com/Big-Data-Marketing-Customers-Effectively/dp/1118733894/ref=sr_1_12?ie=UTF8&qid=1387541531&sr=8-12&keywords=customer+churn)
 
##附录

![][10]
 
*图 12︰ 快照的改动原型上的演示文稿*
  

[1]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-1.png
[2]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-2.png
[3]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-3.png
[4]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-4.png
[5]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-5.png
[6]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-6.png
[7]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-7.png
[8]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-8.png
[9]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-9.png
[10]: ./media/machine-learning-azure-ml-customer-churn-scenario/churn-10.png
 

测试
