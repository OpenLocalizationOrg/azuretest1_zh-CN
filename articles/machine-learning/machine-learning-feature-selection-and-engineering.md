---
ms.openlocfilehash: 19e170e04e4554d9c4b55a496f63f9c8bce33bcc
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties
    pageTitle="工程和 Azure 机器学习中的所选内容的功能 |Microsoft Azure" 
    description="介绍进行特征选择和特征工程并提供属于他们的机器学习数据增强过程中的作用。"
    services="machine-learning"
    documentationCenter=""
    authors="YanZhangADS"
    manager="paulettm"
    editor="cgronlun"/>

<tags
    ms.service="machine-learning"
    ms.workload="data-services"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="07/14/2015"
    ms.author="zhangya;bradsev" />


# 工程和 Azure 机器学习中的所选内容的功能

本主题介绍的功能设计和功能选择数据增强过程中的机器学习的目的。 它阐释了这些进程的涉及使用 Azure 机器学习 Studio 所提供的示例。

[AZURE.INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

采用机器学习的训练数据通常可由所选内容或从收集到的原始数据中抽取功能增强。 工程特征学习如何分类的手写字符图像的上下文中的一个示例是从原始位分布数据构造位密度地图。 此图可以帮助比原始分布更高效地查找字符的边缘。

工程和选定功能提高的效率，训练它尝试提取关键数据中所包含的信息。 它们还提高了这些模型的威力，准确地对输入的数据进行分类和预测感兴趣的结果更加可靠。 功能设计和选择还可以结合使学习更消耗计算 tractable。 它是通过提高并再降低的校准或培训模型所需的功能的数量。 从数学上说，选择来训练模型的功能是解释了数据中的规律，然后成功地预测结果自变量的最小集。

工程设计和功能的选择是过程的一个较大，通常包括四个步骤中的一部分︰

* 数据收集
* 数据增强
* 模型构建
* 后处理

工程设计和所选内容是机器学习的**数据增强**步。 我们的目的而言，可能区分这一过程的三个方面︰

* **数据预处理**︰ 此进程试图确保收集的数据是干净和一致。 它包括如集成多个数据集、 处理缺失数据、 处理数据不一致，并将转换的数据类型的任务。
* **功能工程**︰ 此过程将尝试从现有原始功能在数据中，创建相关的附加功能，并增加对学习算法的预测能力。
* **功能选择**︰ 此过程中试图减少培训问题的维数选择原始数据特征的关键子集。

本主题仅涵盖的功能工程和数据增强过程的特征选择方面。 数据预处理步骤的其他信息，请参阅[在 Azure ML Studio 中预处理数据](http://azure.microsoft.com/documentation/videos/preprocessing-data-in-azure-ml-studio/)视频。


## 创建功能根据您的数据-功能工程

培训数据由的矩阵组成的示例 （记录或存储在行中的观察值），每个都有一套功能 （变量或存储在列中的字段）。 在实验设计中指定的功能有望表征数据中的模式。 尽管许多原始数据字段可以直接包含在用于训练模型的选定的功能集，它通常是指 （工程） 的附加功能需要的原始数据生成增强的训练数据集的功能来构造。

应创建哪种类型的功能来增强数据集，当培训模型？ 工程增强了培训的功能提供了更好地将数据中的模式区分开来的信息。 我们期望新的功能以提供附加信息不清楚地捕获或原始或现有功能集中显而易见。 但是，此过程是一个艺术。 声音和高效的决策通常需要一些专业技能。

当从 Azure 机器学习，是最容易抓住此过程中具体使用 Studio 中提供的示例。 这里提供两个示例︰

* 目标值称为监察实验中回归示例[的自行车租赁数的预测](../machine-learning-sample-prediction-of-number-of-bike-rentals.md)
* 使用[哈希功能计算][哈希功能]的文本挖掘分类示例

### 示例 1︰ 添加时间性特征的回归模型 ###

让我们实验"需求预测的自行车"Azure 机器学习在 Studio 中使用来演示如何对工程回归任务的功能。 本实验的目的是预测的自行车，就是在一特定月/日/小时数内的自行车租赁数的要求。 数据集"自行车租赁提示您数据集"用作原始输入数据。 此数据集基于从维护自行车租赁网络在华盛顿哥伦比亚特区美国资本 Bikeshare 公司的真实数据。 数据集表示在 2011 年和 2012 年年中一天的特定时间内的自行车租赁，并包含 17379 行和 17 列。 原始的功能集包含气象条件 （温度/湿度/风速度），天 （假日/工作日） 的类型。 预测字段为"cnt"，它表示在特定时间内的自行车租赁和其区域范围从 1 到 977 计数。

构建有效的功能，在培训数据中，四个回归模型生成使用相同的算法，但使用四个不同的训练数据集的目标。 四个数据集表示相同的原始输入的数据，但越来越多的功能设置。 这些功能可分为四个类别︰

1. A = 天气 + 假日 + 工作日 + 周末功能的预测的那一天
2. B = 每个以前的 12 个小时中已出租的自行车的数量
3. C = 的前几天在同一小时 12 个中已出租的自行车数量
4. D = 数中每个在同一小时和同一天以前 12 周已出租的自行车

除了功能集 A，已存在于最初的原始数据，通过工程设计过程的功能创建的其他三种功能。 功能集 B 捕获最新对自行车的需求。 功能在特定工时设置 C 捕获对自行车的需求。 功能集 D 捕获需求的自行车在特定工时和每周的某一天。 四个训练数据集每个包括功能集 A、 A + B、 A + B + C 和 A + B + C + D，分别。

在 Azure 机器学习实验，这些四个培训数据集是通过从预处理输入数据集的四个分支形成的。 除左大多数分支，这些分支的每个包含一个[执行 R 脚本][执行 r 脚本]模块，请在其中的一组派生功能 （功能设置 B、 C 和 D） 分别构造和附加到导入的数据集。 下图演示了用于创建中左边第二个分支的功能集 B R 脚本。

![创建特征](./media/machine-learning-feature-selection-and-engineering/addFeature-Rscripts.png)

下表总结了四种机型的性能结果的比较。 最好的结果是显示功能 A + B + C。 错误率下降时注意培训数据中包括其他功能集。 它验证了我们 presumption 功能集 B，C 提供回归任务有关的其他相关信息。 但添加 D 功能似乎未提供任何其他降低了错误率。

![结果的比较](./media/machine-learning-feature-selection-and-engineering/result1.png)

### <a name="example2"></a> 示例 2︰ 创建文本挖掘中的特征  

功能工程是广泛应用与文本挖掘，例如文档分类和主观意图分析相关的任务。 例如，当我们想要分类的文档分为多个类别，典型的假设是个文档类别中包含的单词/短语是不太可能发生在另一个文档类别。 换句话说，该词语/短语分布频率就能够表征不同的文档类别。 文本挖掘应用程序中的文本内容的各个部分通常用作输入的数据，因为工程进程的功能是创建所需涉及单词/短语频率的功能。

若要完成此任务，称为**哈希功能**的技术被用于有效地将任意文本功能变成索引。 而不是将每个文字功能 （词语/短语） 关联到特定的索引，此方法函数的功能应用哈希函数和直接使用其哈希值作为索引。

在 Azure 机器学习，没有[功能哈希][散列功能的]模块创建这些单词/短语功能方便。 下图显示使用此模块的示例。 输入数据集包含两列︰ 介于 1 到 5，书籍分级和实际审核内容。 此[功能哈希][散列功能]模块的目标是要检索的一组新功能显示的对应词的出现频率 / phrase(s) 中特定的图书审查。 若要使用此模块，我们需要完成以下步骤︰

* 首先，选择包含输入的文本的列 (在此示例中的"Col2")。
* 其次，设置"Hashing bitsize"为 8，这意味着 2 ^8 = 256 将创建特征。 所有文本中的单词/阶段将到 256 索引进行哈希处理。 参数"Hashing bitsize"的范围从 1 到 31 之间。 文字 / phrase(s) 不太可能，如果设置为较大的数字要散列到相同的索引。
* 第三，通过设置参数"N 元语法词"为 2。 这从输入的文本获取 unigrams （为每个单词的功能） 和 bigrams （每对相邻词的功能） 的发生频率。 参数"N 元语法词"范围从 0 到 10，表示顺序词特征中要包括的最大数目。  

!["明星 Hashing"模块](./media/machine-learning-feature-selection-and-engineering/feature-Hashing1.png)

下图显示了什么这些新的功能的外观等。

!["明星 Hashing"示例](./media/machine-learning-feature-selection-and-engineering/feature-Hashing2.png)

## 根据您的数据的功能选择筛选功能  ##

特征选择是常用的预测建模任务，例如分类或回归任务训练数据集的构造过程。 目标是从原始数据集，通过最小功能集来表示数据的方差的最大减少其尺寸选择功能的子集。 然后，此功能的子集是唯一的功能，包括以培训模型。 功能选择有两个主要用途。

* 首先，功能选择通常通过消除无关，冗余，提高了分类准确性或高度相关的功能。
* 第二，这使得模型训练过程的效率更高的功能的数量减少得。 这是特别重要的价格昂贵，如支持向量机训练的学员。

虽然功能选择 does 设法减少数中用来训练模型的数据集的功能，它没有通常称为术语"维数缩减"。 特征选择方法提取而不更改它们的原始数据中的特征子集。  维数缩减方法采用工程的功能，可以转换原始特征，并因此对其进行修改。 维数缩减方法的示例包括主体组件分析、 规范的相关分析和单值分解。

等等，监察环境中的特征选择方法的一个广泛应用的类别称为"基于特征选定内容筛选"。 通过评估每个特征和目标属性之间的相关性，这些方法应用统计的度量单位，以将分数分配给每个功能。 功能然后按分数，可用于帮助设置的阈值，或消除特定功能划分等级。 在这些方法中使用的统计措施的例子包括人相关、 相互信息和 Chi 平方的测试。

在 Azure 机器学习 Studio 中，有一些模块提供的功能选择。 下图中所示，这些模块包括[基于筛选器的功能选择][筛选器基于-特征的选择]和[Fisher 线性判别式分析][fisher 线性的判别式的分析]。

![功能选择示例](./media/machine-learning-feature-selection-and-engineering/feature-Selection.png)


例如，考虑使用[基于筛选器的功能选择][筛选器基于-功能-选择]模块。 为了方便起见，我们将继续使用上面所述的文本挖掘示例。 假设我们想要建立回归模型，通过[功能哈希][散列功能的]模块中，创建了一套 256 功能后和响应变量是"Col1"，并表示介于 1 到 5 册审查评级。 通过设置"功能评分方法"是"Pearson 相关"，"目标"列"Col1"且"号所需功能的"50 对。 然后模块[基于筛选器的功能选择][筛选器基于-功能的选择]将会产生包含与目标属性"Col1"50 功能的数据集。 下图显示了此试验和我们刚才描述的输入的参数的流动。

![功能选择示例](./media/machine-learning-feature-selection-and-engineering/feature-Selection1.png)

下图显示了结果数据集。 每个功能被评定根据自身和目标属性"Col1"之间的 Pearson 相关性。 保持与高分的功能。

![功能选择示例](./media/machine-learning-feature-selection-and-engineering/feature-Selection2.png)

安装所选功能的相应分数如下图所示。

![功能选择示例](./media/machine-learning-feature-selection-and-engineering/feature-Selection3.png)

通过应用此[筛选器基于功能选择][筛选器基于-功能-选择]模块，因为它们具有的最相关的功能与目标变量"Col1"，根据"Pearson 相关性"的计分方法选择 50 出的 256 功能。

## 结论
功能设计和功能选择两个常用的步骤准备训练数据时构建一个机器学习模型。 通常先应用功能工程生成附加的功能，然后执行功能选择步骤以消除无关、 冗余，或高度相关的功能。

请注意，它并不总是一定要执行功能的工程或功能选择。 是否需要或不取决于我们拥有或收集的数据，我们选取，该算法和实验的目的。

<!-- Module References -->
[执行 r 脚本]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
[哈希功能处理]: https://msdn.microsoft.com/library/azure/c9a82660-2d9c-411d-8122-4d9e0b3ce92a/
[-基于-功能-选定内容筛选]: https://msdn.microsoft.com/library/azure/918b356b-045c-412b-aa12-94a1d2dad90f/
[fisher 线性的判别式的分析]: https://msdn.microsoft.com/library/azure/dcaab0b2-59ca-4bec-bb66-79fd23540080/
 

测试
