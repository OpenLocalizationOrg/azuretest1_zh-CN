---
ms.openlocfilehash: 332fc022ce51d51a38ae7171f8b6c141de031d3e
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties
   pageTitle="Azure 服务结构演员简介模式和反模式"
   description="设计模式，可以很好地服务结构参与者"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/11/2015"
   ms.author="claudioc"/>

# 可靠的操作者设计模式简介
服务结构可靠参与者的编程模型是围绕主角模型解决实际问题，在云规模较大的平台。 Azure 服务结构是构建高度可靠、 可扩展的应用程序这两个云并在部署易于开发和管理的平台。
本文旨在将有关实际问题的实际纸张。  阅读后通过各种模式，您应能够了解如何使用服务结构主角模型来构建"企业"云"解决方案的解决方案。

## 模式
在本节中，我们将列出一组模式和我们驾驭过程与客户服务过程中的相关的方案。
这些模式表示类都适用于我们的客户要在 Microsoft Azure 生成的解决方案的范围广泛的问题。
虽然方案基于真实情况下，我们已去除大多数特定于域的问题，以使读者更清晰的模式。 您可能会发现很多示例代码是简单，也很明显。 我们要包括出于完整性的考虑该代码而不是因为它不是特别聪明或令人印象深刻。

本文中介绍的模式不应是全面的或规范 — — 某些开发人员可能解决同一个问题或不是我们存在的模式以不同的方式。

[图案︰ 智能高速缓存](service-fabric-reliable-actors-pattern-smart-cache.md)

[图案︰ 分布式的网络和关系图](service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md)

[图案︰ 资源管理](service-fabric-reliable-actors-pattern-resource-governance.md)

[图案︰ 有状态的服务组合](service-fabric-reliable-actors-pattern-stateful-service-composition.md)

[图案︰ 物联网](service-fabric-reliable-actors-pattern-internet-of-things.md)

[图案︰ 分布式的计算](service-fabric-reliable-actors-pattern-distributed-computation.md)

[一些反模式](service-fabric-reliable-actors-anti-patterns.md)

### 了解更多有关参与者，简要历史
[纸](http://dl.acm.org/citation.cfm?id=1624804)由 Hewitt et al.，主角模型的原点是发表 1973 年但才相对最近的主角模型具有已获得更多关注作为一种处理并发性和复杂性在分布式系统中。
主角模型支持细粒度的各个对象 — — 演员 — — 是相互独立的。 它们通过异步消息传递，从而使参与者之间的直接通信进行通信。 操作者执行与单线程语义。 这配合下参与者的状态和其他参与者从隔离的封装，简化从使用者代码删除并发问题的书写高度并行的系统。 演员在池中可用的硬件资源的动态创建。

[Erlang](http://www.erlang.org/)是最受欢迎的演员模型实现。 开发人员已经开始重新发现演员模型中，激发续订的兴趣 Erlang 并创建新的类似 Erlang 的解决方案︰ [Scala](http://www.scala-lang.org/)参与者[Akka](http://akka.io)、 [Akka.net](http://getakka.net/)、 [DCell](http://research.microsoft.com/pubs/75988/dcell.pdf)。

## 在 Azure 服务结构简介
Azure 结构参与者是借用 Erlang 和分布式的对象系统中的一些想法，并添加一个主角间接层公开其在集成的主角模型实现编程利用 Azure 服务结构平台的模型。

Azure 结构参与者的主要优点是︰ 1)**开发人员工作效率**，甚至为非专家程序员;和 2）**默认情况下的透明可扩展性**与程序员没有特殊工作。 Azure 结构参与者是运行在 Azure 结构之上的 a.NET 库和工具，使复杂的分布式应用程序开发更加容易，并通过设计使生成的应用程序可扩展性。 我们展开每个下面这些好处。
Azure 结构参与者的编程模型引发通过提供以下关键抽象、 保证和系统服务的专家和非专家程序员的工作效率。

* *熟悉面向对象编程 (OOP) 模式*。 演员是.NET 类的实现声明.NET 使用者接口异步方法和属性。 因此演员看来程序员可以直接调用其方法/属性的远程对象。 这样，程序员熟悉的 OOP 范例通过打开到消息的调用，将它们路由到适当的终结点、 调用目标参与者的方法，以完全透明的方式处理故障和极端情况。

* *参与者的单线程执行。* Azure 结构运行时保证，主角永远不会超过一个线程上执行一次。 再加上其他参与者提供的隔离，程序员永远不会面临并发性级别的使用者，因此不需要使用锁或其他同步机制来控制对共享数据的访问。 此功能仅对于非专家程序员使分布式应用程序开发 tractable。

* *透明的激活。* Azure 结构运行时激活操作者根据需要只当它要处理的消息。 这清晰地分隔的主角，这是可见的并由应用程序代码和物理内存中，这是对应用程序透明的主角激活控制逻辑创建这一概念。 Azure 结构参与者是类似于虚拟内存，因为它决定何时"页出"（停用） 或"页"（激活） 参与者;应用程序不间断地的访问完整的"内存空间"的逻辑上的创建者，无论它们是在物理内存中的任何特定点的时间。 透明激活允许动态的自适应负载平衡位置和迁移中的使用者通过跨硬件资源池。

* *位置透明性。* 程序员可使用调用者的方法，或传递给其他组件的主角引用 （代理对象） 只包含逻辑标识的主角。 者对它的物理位置的逻辑标识的翻译以及对应的路由的消息由 Azure 结构运行时透明地完成。 应用程序代码与演员知道其物理位置，可能会随时间因故障或资源管理，或因为演员被停用时调用它。

* *与持久存储区的透明集成。* Azure 结构参与者允许声明映射到持久存储区的参与者的内存中状态。 它会同步更新，以透明方式保证调用方接收结果，只有在持久状态已成功更新后。

* *高可用性，故障转移支持与应用程序生命周期管理。* 平台管理和复制的方式，可以被还原的 azure 结构参与者状态如果，例如，群集中的节点失败。 Azure 服务结构还管理应用程序生命周期，并允许零停机时间对应用程序升级。  
编程模型旨在指导程序员 Azure 结构参与者向下扩展其应用程序或服务通过几个数量级的可能成功的路径。 这是通过采用行之有效的最佳做法和模式，并提供较低级别的系统功能的有效实施。 以下是几个关键因素，使可扩展性和 Azure 结构应用程序的性能。

* *隐式的细粒度应用程序状态的分区。* 通过使用直接寻址的实体作为演员，程序员隐式地冲破他们的应用程序的整体状态。 虽然 Azure 结构参与者的编程模型并不指定大或小的主角应该是，在大多数情况下它意义具有相对大的使用者--数以百万计或数字多 – 的每个元素表示一个自然实体的应用程序，如用户帐户、 采购订单等。被单独可寻址的演员和抽象出来由运行时其物理位置，Azure 结构参与者有巨大灵活地平衡负载和在透明和泛型方法不带任何思想，从应用程序开发人员处理的热点。

* *自适应资源管理。* 使用者关于所在地的交互和位置透明性由于其他演员做任何假定，Azure 结构运行时可以管理和决策细粒度上的使用者的位置/迁移反应来加载和通信模式中的计算群集跨不失败的传入请求的情况下非常动态的方式来调整可用的硬件资源的分配。 通过创建多个复制副本的特定主角运行时可以提高吞吐量的主角，如有必要而无需对应用程序代码进行任何更改。

* *多元的通讯。* Azure 结构中的参与者有逻辑终结点，并且它们之间消息跨一组固定的所有全部的物理连接 （TCP 套接字） 多路复用。 这允许 Azure 结构演员运行时主机寻址的实体，以每个演员的零操作系统开销非常大号 （百万）。 此外，激活/取消激活的参与者不会引起成本的注册/注销一个物理端点，例如 TCP 端口或 HTTP URL。

* *有效的安排。* Azure 结构运行时计划在每个物理处理器内核线程的自定义线程池执行大量的单线程的演员。 参与者代码以非阻塞延续基于的样式 （Azure 结构参与者的编程模型的要求） 编写应用程序代码运行效率非常高"合作"与没有争夺多线程方式。 这使系统达到较高的吞吐量，并运行在非常高的 CPU 利用率 （最多 90 + %） 与强大的稳定性。 系统和负载中的参与者的数量增长不会不会导致其他线程或其他操作系统基元的事实可以帮助个别节点和整个系统的可扩展性。

* *显式异步。* Azure 结构参与者的编程模型使得显式分布式应用程序的异步特性和参考线程序员编写非阻塞异步代码。 这样，很大程度的分布式并行性和整体吞吐量无需显式使用多线程处理。
