---
ms.openlocfilehash: ca6711256bf1b766382c865bb38c6fa19cc9e16c
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties 
   pageTitle="网络访问控制列表 (ACL) 是什么？"
   description="了解 Acl"
   services="virtual-network"
   documentationCenter="na"
   authors="telmosampaio"
   manager="carolz"
   editor="tysonn" />
<tags 
   ms.service="virtual-network"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="06/08/2015"
   ms.author="telmos" />

# 网络访问控制列表 (Acl) 是什么？

网络访问控制列表 (ACL) 是一种安全增强供 Azure 部署。 ACL 提供了有选择地允许或拒绝对虚拟机终结点的通信能力。 此数据包筛选功能提供了额外的安全层。 您可以指定网络终结点仅 Acl。 您不能指定虚拟网络或虚拟网络中包含一个特定子网对的 ACL。 

> [AZURE.IMPORTANT] 建议使用网络安全组 (NSGs) 而不是尽可能的 Acl。 若要了解有关 NSGs 的详细信息，请参阅[网络安全组是什么？](../virtual-networks-nsg)。

可以通过使用 PowerShell 或管理门户配置 Acl。 若要通过使用 PowerShell 配置网络 ACL，请参阅[管理访问控制列表 (Acl) 使用 PowerShell 的终结点](virtual-networks-acl-powershell.md)。 要通过管理门户配置网络 ACL，请参阅[如何设置设置终结点的虚拟机](../virtual-machines-set-up-endpoints/)。

使用网络 Acl，可以执行以下操作︰

- 有选择地允许或拒绝基于远程子网到虚拟机输入终结点的 IPv4 地址范围的传入通信。

- 黑名单的 IP 地址

- 创建多个规则，每个虚拟机的终结点

- 指定每个虚拟机终结点的最多 50 个 ACL 规则

- 使用规则排序，以确保正确的规则集将应用于一个给定的虚拟机的终结点 （从最低到最高）

- 指定对特定远程子网的 IPv4 地址的 ACL。

## Acl 的工作原理

ACL 是一个对象，包含的规则的列表。 当创建 ACL 并将其应用于一个虚拟机的终结点时，数据包筛选都发生在您的虚拟机的主机节点。 这意味着来自远程 IP 地址的通信量筛选的匹配而不是在 VM 上的 ACL 规则的主机节点。 这可以防止您的 VM 数据包筛选器花宝贵的 CPU 周期。

当创建虚拟机，则默认 ACL 被放到位，能够阻止所有传入通信。 但是，如果创建终结点是对于 （端口 3389），然后的默认 ACL 被修改，以允许对该终结点的所有入站的通信。 入站的通信从任何远程子网则允许指向该终结点并且没有防火墙设置时需要。 所有其他的端口被阻止入站通信，除非为这些端口创建终结点。 默认情况下允许出站通信。

**默认 ACL 示例表**

| **Rule #** | **远程子网** | **终结点** | **允许/拒绝** |
|--------|---------------|----------|-------------|
| 100    | 0.0.0.0/0     | 3389     | 允许      |

## 允许和拒绝

可以有选择地允许或拒绝某个虚拟机输入终结点的网络通信通过创建规则，指定"允许"拒绝"。 值得注意的是，默认情况下，当创建一个终结点时，所有通讯被都拒绝到终结点。 由于这个原因，很重要，若要了解如何创建允许/拒绝规则并将它们放入适当的优先顺序，如果要精确地控制您选择允许到达终结点的虚拟机的网络通信量。

要考虑的事项︰

1. **没有 ACL –**默认情况下创建一个终结点时，我们允许所有的终结点。

1. **允许的**当您添加一个或多个"允许"范围时，也会被默认情况下拒绝所有其他区域。 只允许的 IP 范围从数据包将能够与虚拟机终结点进行通信。

1. **拒绝-**当您添加一个或多个"拒绝"范围时，则默认情况下允许所有通信的其他范围。

1. **组合允许和拒绝的**您可以使用"允许"和"拒绝"时您要允许或拒绝特定 IP 范围挤出的组合。

## 规则和规则优先级

在特定的虚拟机的终结点，可以设置网络 Acl。 例如，您可以指定网络 ACL 的访问速度的锁定特定 IP 地址的虚拟机上创建 RDP 终结点。 下表显示向公用虚拟 IPs (VIPs) 的某个区域所允许访问的 RDP 授予访问权限的方法。 所有其他远程 Ip 将会被拒绝。 我们按照*最低优先*规则顺序。

### 多个规则

在下面的示例中，如果您想要访问 RDP 终结点只允许来自两个公共的 IPv4 地址范围 （65.0.0.0/8 和 159.0.0.0/8），来做到这一点通过指定两个*允许*规则。 在这种情况下，由于 RDP 默认创建的虚拟机，您可能需要锁定到 RDP 端口的远程子网的访问。 下面的示例演示公共虚拟 IPs (VIPs) 的某个区域所允许访问的 RDP 授予访问权限的方法。 所有其他远程 Ip 将会被拒绝。 这样做的原因是网络 Acl 可以为特定虚拟机终结点设置和默认情况下拒绝访问。

**示例-多个规则**

| **Rule #** | **远程子网** | **终结点** | **允许/拒绝** |
|--------|---------------|----------|-------------|
| 100    | 65.0.0.0/8    | 3389     | 允许      |
| 200    | 159.0.0.0/8   | 3389     | 允许      |

### 规则顺序

为终结点，可以指定多个规则，因为必须有一种方法来组织规则来确定优先的规则。 规则顺序指定优先级。 网络 Acl 按照*最低优先*规则顺序。 在下面的示例中，端口 80 上的终结点有选择地授予访问权限仅特定 IP 地址范围。 若要配置此，我们有的拒绝规则 (规则\#100) 的 175.1.0.1/24 空间中的地址。 具有优先级 200，允许访问的所有其他地址在 175.0.0.0/8 下，然后指定第二个规则。

**示例-规则优先级**

| **Rule #** | **远程子网** | **终结点** | **允许/拒绝** |
|--------|---------------|----------|-------------|
| 100    | 175.1.0.1/24  | 80       | 拒绝        |
| 200    | 175.0.0.0/8   | 80       | 允许      |

## 网络 Acl 和负载平衡的设置

负载平衡 （磅设置） 设置终结点上，可以指定网络 Acl。 如果为磅设置指定 ACL，则网络 ACL 应用于该磅设置中的所有虚拟机。 例如，如果磅设置使用"端口 80"来创建和磅设置包含 3 虚拟机，网络 ACL 创建终结点上一个 VM 将自动应用于其他 Vm 的"端口 80"。

![网络 Acl 和负载平衡的设置](./media/virtual-networks-acl/IC674733.png)

## 下一步行动

[如何管理访问控制列表 (Acl) 为终结点使用 PowerShell](../virtual-networks-acl-powershell) 
