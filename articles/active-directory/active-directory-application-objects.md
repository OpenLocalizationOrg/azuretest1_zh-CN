---
ms.openlocfilehash: 44cd9cb2a3fa38ae2e01ba66de78ea10c3d3607a
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties
   pageTitle="应用程序对象和服务主体对象"
   description="应用程序对象和 ServicePrincipal Azure Active Directory 中的对象之间的关系的讨论"
   documentationCenter="dev-center-name"
   authors="msmbaldwin"
   manager="mbaldwin"
   services="active-directory"
   editor=""/>

<tags
   ms.service="active-directory"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="identity"
   ms.date="06/08/2015"
   ms.author="mbaldwin"/>


# 应用程序对象和服务主体对象

此图说明了应用程序对象和调用**HR 应用程序**的示例应用程序的上下文中的 ServicePrincipal 对象之间的关系。 有三个租户︰ **Adatum**，组织开发的应用程序，和**Contoso**和**Fabrikam**，承租人占用**HR 应用程序**。

![应用程序对象和一个 ServicePrincipal 对象，对象之间的关系](./media/active-directory-application-objects/application-objects-relationship.png)


在 Azure 管理门户中注册应用程序时，在目录租户中创建两个对象︰

- **应用程序对象**︰ 此对象表示您的应用程序的定义。 您可以在下面的**应用程序对象**部分找到其属性的详细的说明。

- **ServicePrincipal 对象**︰ 此对象表示在目录租户应用程序的一个实例。 您可以将策略应用到 ServicePrincipal 对象，其中包括将权限分配给允许应用程序读取租户的目录数据的 ServicePrincipal。 无论何时更改应用程序对象，所做的更改也应用于您组织中相关联的 ServicePrincipal 对象。


> [AZURE.NOTE] 如果您的应用程序配置为外部访问，对应用程序对象之前不会反映在使用者租户的 ServicePrincipal 使用者租户移除访问权限并再次授予访问权限。
 


在上面的图中，步"1"是创建应用程序和 ServicePrincipal 对象的过程。

在步骤 2 中，当公司管理员授予访问权限，ServicePrincipal 对象在 Azure AD 租户的公司中创建并指派公司管理员授予的目录访问级别。

在步骤 3 应用程序 （例如，Contoso 和 Fabrikam） 每个使用者承租人有自己 ServicePrincipal 对象，表示应用程序的实例。 在此示例中，它们各有代表 HR 应用程序 ServicePrincipal。
 




## 应用程序对象属性

下表列出的应用程序对象的所有属性，并为开发人员提供包括重要的详细信息。 这些属性将应用于 web 应用程序、 web Api，以及本机客户端应用程序注册的 Azure 的广告。

 
### 常规

属性 | 说明
| ------------- | ----------- 
| 名称 | 该应用程序的显示名称。 在向导中**添加应用程序**所需的属性。
| 徽标 | 表示您的应用程序或公司应用程序标志。 此标志使外部用户可以更轻松地与您的应用程序授予访问请求。 当上传徽标，请遵循**传徽标**向导中的技术指标。 如果不提供一个徽标，将出现默认徽标。
| 外部访问 | 确定是否允许外部组织中的用户授予您的应用程序单一登录和访问其组织的目录中的数据。 此控件将影响仅授予访问权限的能力。 它不会更改已授予的访问权限。 只有公司管理员可以授予访问权限。
 

### 单一登录
 
属性 | 说明
| ------------- | ----------- 
| 应用程序 ID URI | 您的应用程序的逻辑唯一标识符。 在向导中**添加应用程序**所需的属性。 <br><br>应用程序 ID URI 是逻辑标识符，因为它不需要解析为一个互联网地址。 它通过您的应用程序发送到 Azure AD 的单个登录请求时显示。 Azure 广告标识您的应用程序，并将登录响应 （SAML 令牌） 发送到应用程序注册期间提供的答复 URL。 使用应用程序 ID URI 值，来设置 wtrealm 属性 （WS 联合身份验证） 或颁发者属性 （对于 SAML P) 时进行登录请求。 **应用程序 ID URI**必须是一个唯一的值，在您的组织的 Azure 广告。<br><br>**注意**︰ 时启用外部用户的应用程序，该应用程序的应用程序 ID URI 的值必须是一个目录的验证域中的地址。 因此，它不能 URN。 这一安全措施可防止组织所属其他组织指定 （和执行） 唯一属性。 在开发期间，可以将您的应用程序 ID URI 更改为在您的组织的初始域 （如果您没有验证自定义/虚荣域），位置和更新您的应用程序使用这一新值。 在初始域是 3 级域创建注册时，如 contoso.onmicrosoft.com。
| 应用程序的 URL | 网页上，用户可以登录并使用您的应用程序的地址。 在向导中**添加应用程序**所需的属性。<br><BR>**注意**︰ 设置为此属性中添加应用程序向导也被设置为的值的回复 URL 的值。
| 回复 URL | 您的应用程序的物理地址。 Azure 广告发送单个登录响应到此地址的标记。 在**添加应用程序**向导的第一个注册过程中设置应用程序的 url 的值也被设置为回复 URL 的值。 当在请求中进行登录，使用回复 URL 值的 wreply 属性 （WS 联合身份验证） 或 （对于 SAML P) 的**AssertionConsumerServiceURL**属性设置。<br><BR>**注意**︰ 当启用外部用户的应用程序，必须**https://**地址回复 URL。
| 联合元数据 URL | （可选）。 表示您的应用程序联合元数据文档的物理 URL。 它是需要支持 SAML P 注销。 Azure 广告下载元数据文档中承载该终结点上，并使用它来发现用于验证您注销的请求以及您的应用程序退出 URL 上的签名的证书的公用部分。 首先添加您的应用程序时，您不能配置该属性。 它可以只在以后配置。<br><BR>**注意**︰ 如果您需要支持 SAML P 注销，但您为您的应用程序没有联合元数据端点，请联系客户支持的其他选项。
 

### 调用图形 API 或 Web Api
 
属性 | 说明
| ------------- | ----------- 
| 客户机 ID | 您的应用程序的唯一标识符。 您需要调用图形 API 或其他 web Api 注册 Azure 的广告中使用此标识符。 Azure AD 应用程序注册过程将自动生成此值，则不能更改。<BR><BR>若要使您的应用程序通过图形 API 访问 （用于读取或写入访问权限） 的目录，您需要客户机 ID 和密钥 （即在 OAuth 2.0 中作为客户端秘密）。 您的应用程序使用的客户端 ID 和密钥请求访问令牌从 Azure AD OAuth 2.0 令牌的终结点。 （若要查看所有 Azure AD 终结点，请在命令栏中，单击**查看终结点**）。当使用 Graph API 来获取或设置 （更改） 目录数据，您的应用程序将使用该访问令牌图形 api 请求授权标头中。
| 密钥 | 如果您的应用程序读写数据操作在 Azure 的广告，如数据，可通过图形 API，您的应用程序需要一个密钥。 当您请求访问令牌来调用图形 API 时，您的应用程序将提供其**客户机 ID**和**密钥**。 该令牌的终结点使用的 ID 和密钥发出访问令牌之前验证您的应用程序。 您可以创建多个键来解决密钥翻转方案。 而且，您可以删除已过期的密钥泄露，或不再使用。
| 管理访问 | 选择从三个不同的访问级别之一︰ 单一登录 (SSO)、 SSO 和读取的目录数据或 SSO 和读/写目录数据。 您还可以删除访问。 有关目录访问权限的详细信息，请参阅[应用程序的访问级别](https://msdn.microsoft.com/library/azure/b08d91fa-6a64-4deb-92f4-f5857add9ed8#BKMK_AccessLevels)。<br><BR>**注意**︰ 您的应用程序的目录访问级别的更改仅应用于您的目录。 客户已授权访问您的应用程序不适用于所做的更改。
 
 
### 本机客户端
 
属性 | 说明
| ------------- | ----------- 
| 重定向 URI | 到 Azure 的广告将重定向响应 OAuth 2.0 授权请求的用户代理的 URI。 值不需要物理的终结点，但必须是有效的 URI。

## 


 
 
测试
