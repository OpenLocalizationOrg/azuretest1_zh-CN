---
ms.openlocfilehash: cb5e9bb625278092177a9653b82cfba2fc499908
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties 
    pageTitle="Azure 搜索构建一个原型应用程序" 
    description="创建第一个应用程序原型入门 Azure 搜索。" 
    services="search" 
    documentationCenter="" 
    authors="HeidiSteen" 
    manager="mblythe" 
    editor=""/>

<tags 
    ms.service="search" 
    ms.devlang="rest-api" 
    ms.workload="search" 
    ms.topic="article" 
    ms.tgt_pltfrm="na" 
    ms.date="07/08/2015" 
    ms.author="heidist"/>

# Azure 搜索构建一个原型应用程序

开发人员几乎总是评估 Azure 搜索的初步测试应用程序，演示自定义应用程序中添加 Azure 搜索的值开头。
在本文中，我们为您提供几个构造块，以加速原型制作过程。
 
- Visual studio C# 项目，包括 data.json 和 schema.json 文件。 具有示例数据，可以立即生成并运行解决方案，确认解决方案之前编写一行代码的工作在您的系统上。 

    如果可能，请尝试替换这些独立、 断开连接的架构和数据文件从您的业务数据。 然后，当运行应用程序、 获取创建的索引基于您的架构，并基于您的数据文件的文档时，将会立刻在 Azure 搜索中使用。

- 如何组织数据的指南将上载到 Azure 搜索。 对于每个索引，您需要一个数据集。 Azure 搜索使用 JSON 数据序列化。

- 最后，我们会告诉您一些附加功能需要较长的原型到新的水平，采用搜索特定功能，如多面导航，计分类型预调整的结果，配置文件或自动完成查询，并搜索与页相关的功能，在严格的全文搜索不可用，另一对。

在结束时，您将具有一个原型应用程序中，使用您的数据，来演示使用 Azure 搜索可靠的搜索体验。 

## 准备数据

针对在 Azure 搜索创建搜索索引执行搜索操作。 索引包含多个部分，包括计分配置文件和 suggesters，但大量索引包含在搜索操作中使用的数据字段。 

数据集提供字段应为平面数据文件 （以 JSON)，数据集中的每个字段映射到要填充的索引中等效字段的位置。 独立，直接在该架构中添加索引，如 CORS 选项或计分配置文件的其他部分。

以本机方式，使用 JSON 数据源等作为 Azure 表存储，将提供比关系数据更容易使用的数据，您将需要单一视图，还是提供了一个行集合中的所有字段的表。

若要上载数据和架构文件使用原型示例应用程序中的代码，您可以覆盖解决方案中嵌入的默认架构和数据文件。

> [AZURE.NOTE] 您可以加载多个数据文件也许要上载批处理中的数据但数据结构必须是相同的每个数据文件上传到相同的索引。 您不能加入索引;每个索引作为独立搜索 corpus。

## 测试您的系统上的原型解决方案

1. [创建在 Azure 门户 Azure 搜索服务](search-create-service-portal.md)。

    对于任何现有的 Azure 订阅可以共享的 （免费） 版本的服务。 共享的服务通常用于原型。 请记住，共享的服务提供 50 MB 的数据或总的 10000 个文档，无论哪种情况先。 此外，数据和文档可以跨 3 索引的最大值。 

    使用内置的示例数据文件中，运行原型的示例应用程序中，将创建一个名为"musicstoreindex"，包含 246 文档，278 kb Azure 搜索服务上的索引中。 稍后在本演练中，您将替换为新的一个此索引使用最多将占用的艾德数据 # # 文档和 # # MB。

2. [下载该原型生成器解决方案](http://go.microsoft.com/fwlink/p/?LinkId=536479)。 这是在 C# 生成控制台应用程序用于创建、 加载和查询索引 2013 Visual Studio 解决方案。 如果您未安装 Visual Studio，则可以获得免费[Visual Studio 2013年速成](http://www.visualstudio.com/products/visual-studio-express-vs.aspx)版。

3. 编辑 app.config 添加针对您的搜索服务和 api 密钥的配置设置。 

    可以从[服务门户中的仪表板](search-create-service-portal.md)中获取 URL 和管理 api 密钥。 URL，请键入该服务名称，包括 https 前缀的完整路径和`search.windows.net`域。

4. 生成解决方案以确保没有生成错误。 您可能需要更新程序包可解决生成错误。 右击解决方案来更新软件包**管理 NuGet 程序包**。

5. 运行使用内置的架构和数据文件的解决方案。 此步骤是可选的但它可以在您购买任何时候添加您自己的数据之前确认解决方案的工作原理。 控制台输出以下信息︰

    - 删除的索引 （索引名称"musicstoreindex"的存在，才会发生）
    - 创建索引 （在您的服务创建新的索引名为"musicstoreindex"）
    - 文档发布 （为每个 JSON 文件一条消息）
    - 等待 5 秒钟 （允许索引完成后才能颁发第一个查询）
    - 对于 '最佳' 没有提高 （运行一个简单的查询，索引中加载了数据证明） 与搜索项的搜索结果

6. 停止应用程序并删除索引使您的空间。 

    > [AZURE.TIP] 您可以使用[门户](https://portal.azure.com)删除该索引。 单击索引名称以打开索引刀片式服务器并使用**删除**命令。

## 将架构和数据的 JSON 文件替换为您的数据

在原型解决方案中，没有一个架构文件和三个数据文件︰ data1.json、 data2.json 和 data3.json。 架构文件 (schema.json) 应替换描述您的数据的架构。 

默认情况下，这些文件位于解决方案文件夹中︰

![][1]

如果您的数据可以进入 JSON 文件，可以覆盖现有的文件与您的数据，然后运行应用程序来创建并加载索引。 将数据分发到多个文件有助于演示批处理上载操作。 

用于加载数据的其他方法包括使用索引器 （要求 Azure DocumentDB 数据源或 SQL Azure 数据库数据源）。 示例代码，演示如何加载数据的其他方式可以在[Azure 搜索视频和教程列表](https://msdn.microsoft.com/library/azure/dn818681.aspx)在 MSDN 上找到。

### 编辑查询

默认查询中内置了解决方案引用字段中内置的数据文件的结构。 后已覆盖以使用您的数据的数据文件，您可以注释掉查询代码或者修改它以使用您的架构中的字段。 搜索查询语法的详细信息，请参阅[搜索文档](https://msdn.microsoft.com/library/azure/dn798927.aspx)。

### 生成并运行应用程序

按**f5 键**以运行该应用程序。 作为之前，您应该看到加载，并可查询创建消息，指示的索引。

现在，您可以操作的索引，它可以作为进一步调查的基础。

在这种情况下，您可能需要切换到[Fiddler](search-fiddler.md)或[镶边把邮递员弄](search-chrome-postman.md)运行查询，修改任何使用搜索服务和索引的示例应用程序或添加自定义代码，提供了数据可视化。

## 添加评分的配置文件

我们建议您进行试验以[计分配置文件](search-get-started-scoring-profiles.md)通过门户或通过代码。 计分的配置文件增加特定字段中找到的搜索术语的重要性。 例如，如果搜索词的城市名称，希望将放在城市字段来显示文档的说明字段中有*西雅图*结果高于*西雅图*的文档。

添加评分的配置文件更改索引;您将需要重建和重新加载索引，只要修改架构。 鉴于此，考虑将计分的配置文件的代码段添加到原型 （或修改计分的配置文件示例使用索引代码）。

计分的配置文件的参考文档，请参阅[添加评分的配置文件](https://msdn.microsoft.com/library/dn798928.aspx)。

## 添加 suggesters

Suggesters 指的是受欢迎的搜索功能，项目的可能的搜索词列表基于来自用户 （键入"wea"提示的"天气"、"气象频道"、"气象地下设施"等的记忆式键入搜索词列表） 的文本输入。

若要添加 suggesters，请指定使用哪些字段来生成自动完成或 typeahead 查询的索引架构中添加节。 包含名称或具有非重复值的短字符串字段往往效果最好。 有关详细信息，请参阅[创建索引](https://msdn.microsoft.com/library/dn798928.aspx)。

## 请尝试语言分析器

语言分析器提供语义规则区分基本和非基本词、 根表单和均匀的同义词。 默认情况下，Azure 搜索对英语使用 Lucene 语言分析器。 您可以指定不同的分析器索引特性的特定字段，以便您可以构建架构和包含字段使用不同的分析器的文档 （例如，多语言的应用程序可能合并法语和英语字段在同一文档中并排）。 有关更多详细信息，请参阅[语言支持](https://msdn.microsoft.com/library/dn879793.aspx)。

## 下一步行动

在前面的章节中，您可以修改要将更多的功能添加到原型的索引。 在这种情况下，索引的更改均主要完成 （我们没有介绍启用 CORS，其余架构更改只会使它）。

进一步建立原型将现在可能会导致您在两个不同的方向︰ 在 UI 中，可能添加多面导航或进一步缩小范围的搜索或您的解决方案的数据同步方面进一步探索其他筛选器向外焦点。 许多解决方案具有易失数据。 对于许多开发人员，同步事务数据库系统和 Azure 搜索索引之间的数据更新是下一个优先级，一旦基本搜索行为进行验证。

请访问这些链接以了解详细信息︰

- [典型的使用 Azure 搜索开发项目的工作流](search-workflow.md)

- [自定义 azure 搜索索引器](search-indexers-customization.md)

- [在 Azure 搜索多面导航](search-faceted-navigation.md) 

- [分页搜索结果在 Azure 搜索](search-pagination-page-layout.md)


<!--Image references-->
[1]: ./media/search-build-prototype/azsearch-datafiles.png
 