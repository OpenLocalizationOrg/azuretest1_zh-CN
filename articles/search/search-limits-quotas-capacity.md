---
ms.openlocfilehash: 70f6b0c8226c22ea903ada6172c642f6856f7166
ms.sourcegitcommit: bab1265d669c3e6871daa7cb8a5640a47104947a
translationtype: MT
---
<properties
    pageTitle="在 Azure 搜索服务限制"
    description="在容量规划中使用 azure 搜索限制和请求以及 reponses 的最大限制。"
    services="search"
    documentationCenter=""
    authors="HeidiSteen"
    manager="mblythe"
    editor=""
    tags="azure-portal"/>

<tags
    ms.service="search"
    ms.devlang="NA"
    ms.workload="search"
    ms.topic="article" 
    ms.tgt_pltfrm="na"
    ms.date="08/18/2015"
    ms.author="heidist"/>

#在 Azure 搜索服务限制

在存储、 负载以及大量索引、 文档和其他对象的最大限制取决于您如何订阅 Azure 搜索。 免费服务被用于评估和证明的概念测试、 低限制的所有对象和工作负载，这样可以更 equitably 共享的资源。 

在仅由您的服务使用的专用计算机上运行标准。 单独使用一个专用的服务为您提供了扩展向上或向下，与包括最小配置，每个级别更多的存储和处理容量的能力。

##免费的 （共享的） 搜索服务的最大限制

Azure 的订阅服务器可以使用开发或非常小的搜索应用程序的共享 （多租户） 搜索的服务。 共享的服务附带了 Azure 订购。 它是一种免费选项，允许您在注册前体验与服务。 它提供了︰

Object|Limit
------|-----
最大索引数|3
每个索引字段的最大数量|1000
最大文档数|10000
最大存储大小|50 MB
最大的分区|N/A
最大复制副本|N/A
最大的搜索单位|N/A
索引器的最大数量|3
索引器的数据源的最大数量|3
每次调用索引器的索引的文档的最大数量|10000

请注意没有配额或与查询关联的最大限制。 查询每秒 (QPS) 是变量，这取决于可用带宽和系统资源的竞争。 备份您的共享的服务的 Azure 计算和存储资源共享的多个订阅服务器，因此 QPS 为您的解决方案取决于多少其他工作负荷运行一次。

##最大限制为标准的 （专用） 搜索服务的

在标准的定价层下, 专用的搜索服务存储只是您的数据，并运行仅您的工作负载。 与共享服务，不同专用的搜索服务的资源分配进行调整，缩放到任何级别需要。 可以独立设置分区 （以扩大存储） 和副本 （以提供高可用性并扩大 QPS 和索引性能） 的资源级别。 深入了解不同的资源配置，请参阅[管理搜索解决方案](search-manage.md)。

下表是一份上限，但是您应该查看矩阵图表进一步的理解方面允许[组合分区和复制副本的](#chart)容量。

Object|Limit
------|----
最大索引数|每个搜索服务 50
每个索引字段的最大数量|1000
最大文档数|15 万个，每个分区
最大存储大小|每个分区的 25 GB
最大的分区|每个搜索服务 12
最大复制副本|6 每个搜索服务
最大的搜索单位|每个搜索服务 36
索引器的最大数量|每个搜索服务 50
索引器的数据源的最大数量|每个搜索服务 50
每次调用索引器的索引的文档的最大数量|无限

在 Azure 搜索容量可以调用搜索单位增量购买。 标准的定价层允许最多 36 个搜索搜索服务单位。 此限制会覆盖上分区和复制副本的单个限制。 例如，不能缩放最多 12 分区加 6 的副本，您的服务，因为这样做将需要 72 搜索单位 (12 x 6) 超过 36 个搜索单元，每个服务的限制。

##关于分区和复制副本

**分区**提供存储和 IO。 12 分区最多，可以有一个搜索服务。 每个分区提供了 15 万个文档的硬限制或 25 GB 的存储空间，准。 如果您添加的分区，您搜索服务可以加载更多的文档。 例如，带有单个分区，最初存储最多 25 GB 的数据服务可以存储 50 GB 时向服务中添加第二个分区。

**复制副本**是副本的搜索引擎。 单个搜索服务可以有最多为 6 的副本。 您需要至少 2 副本读 （查询） 的可用性，和至少 3 副本以用于读写 （查询，索引） 的可用性。

在每个副本上运行的每个索引副本。 添加副本时，索引的附加拷贝联机支持更高的查询工作负载，负载平衡请求切换多个复制副本。 如果您有多个索引，说，6 和 3 的副本，每个副本将拥有一份 6 的所有索引。

请注意我们提供不难估计，每秒 (QPS) 查询执行查询可以很多因复杂的查询和竞争性的工作负载。 一般情况下，副本可服务约 15 QPS，但您的吞吐量会稍高或低取决于查询的复杂性 （多面查询是更复杂） 和网络延迟。 它也必须认识到，虽然添加副本将明确添加规模和性能，最终结果不是严格线性︰ 添加 3 副本不能保证三倍的吞吐量。 查询延迟是一个指示符，该指示可能需要新的复制副本。

<a id="chart"></a>
##分区和复制副本的受支持的组合

如前所述，在分区和复制副本的有效限制基于选择，同时保持 36 搜索每个服务的单位的边界内的资源的组合。 根据搜索单元 (SU)，分配资源。 专用的搜索服务将启动一个副本和一个分区，作为一个搜索单元。

更多容量计算为分区副本，从而支持给定的配置所需的搜索单位总数的乘积。

下表是一个图表列出副本上的垂直轴和水平轴上的分区。 交集显示搜索支持受 36 搜索单元的每个组合所需的单位数 (SU) 每个服务的限制。 例如，如果希望 6 副本和 2 个分区，此配置将需要搜索的 12 个单位。 若要使用 4 副本和 2 个分区，则需要 8 搜索单位。 作为一般规则，大多数搜索应用程序往往需要比分区的多个副本。

<table cellspacing="0" border="1">
<tr><td><b>6 副本</b></td><td>6 SU</td><td>12 SU</td><td>18 SU</td><td>24 SU</td><td>36 SU</td><td>N/A</td></tr>
<tr><td><b>5 副本</b></td><td>5 SU</td><td>10 SU</td><td>15 SU</td><td>20 SU</td><td>30 SU</td><td>N/A</td></tr>
<tr><td><b>4 副本</b></td><td>4 SU</td><td>8 SU</td><td>12 SU</td><td>16 SU</td><td>24 SU</td><td>N/A </td></tr>
<tr><td><b>3 副本</b></td><td>3 SU</td><td>6 SU</td><td>9 SU</td><td>12 SU</td><td>18 SU</td><td>36 SU</td></tr>
<tr><td><b>2 复制副本</b></td><td>2 SU</td><td>4 SU</td><td>6 SU</td><td>8 SU</td><td>12 SU</td><td>24 SU</td></tr>
<tr><td><b>1 副本</b></td><td>1 SU</td><td>2 SU</td><td>3 SU</td><td>4 SU</td><td>6 SU</td><td>12 SU</td></tr>
<tr><td>N/A</td><td><b>1 分区</b></td><td><b>2 个分区</b></td><td><b>3 分区</b></td><td><b>4 分区</b></td><td><b>6 分区</b></td><td><b>12 分区</b></td></tr> 
</table>

搜索设备、 定价和容量都详细说明 Azure 的 web 站点上。 [定价详细信息](http://azure.microsoft.com/pricing/details/search/)的更多信息，请参见

> [AZURE.NOTE] 您选择的分区数必须均匀地划分为 12 (具体而言，1、 2、 3、 4、 6、 12)。 这是因为 Azure 搜索预划分每个索引为 12 shards，以便它可以跨分区。 例如，如果您的服务有三个分区并创建一个新索引，每个分区将包含 4 shards 的索引。 一个索引的 Azure 搜索 shards 是实现的详细信息，如有更改，在将来发布。 虽然数是 12 的今天，不应期望始终是将来 12 这个数字。

##选择一种组合的分区和高可用性的副本

因为很简单和相对较快，以扩大规模，我们通常建议的开头一个分区和一个或两个副本，然后作为查询卷向上扩展生成。 对于许多部署中，一个分区 （在每个分区的 15 万个文档） 提供足够的存储和 IO。 

查询工作负载，但是，依赖于副本。 如果您需要更多的吞吐量或高可用性，您可以要求新的复制副本。 

为实现高可用性的常规建议如下︰

- 2 副本以用于只读的工作负载 （查询） 的高可用性
- 3 个或更多副本以用于读写负载 （查询和索引） 的高可用性

目前，没有内置的机制用于灾难恢复。 添加分区或副本将是满足灾难恢复目标的错误策略。 相反，可以考虑在服务级别添加冗余。 有关解决方法的深入讨论，请参阅[此论坛帖子](https://social.msdn.microsoft.com/Forums/ee108a26-00c5-49f6-b1ff-64c66c8b828a/dr-and-high-availability-for-azure-search?forum=azuresearch)。

> [AZURE.NOTE] 取消服务级别协议和可伸缩性是功能的标准服务。 在固定的资源级别，使用副本和共享的多个订阅服务器的分区提供免费服务。 如果您入门免费服务，现在想要升级，需要在标准级别创建新的 Azure 搜索服务，然后重新加载索引和数据复制到新的服务。 有关服务提供的说明，请参阅[创建门户中 Azure 搜索服务](search-create-portal.md)。

##API 密钥限制

身份验证服务使用 Api 密钥。 有两种类型。 请求标头中指定了管理密钥。 查询参数指定的 url。 有关密钥管理的详细信息，请参阅[管理您在 Microsoft Azure 上的搜索服务](search-manage.md)。

- 每个服务的 2 admin 密钥的最大值
- 50 查询键，每个服务的最大值

##申请限制

- 每个请求 16 MB 的最大值
- 8 KB 的最大 URL 长度 
- 每批的索引的最大 1000年文档上载、 合并，或删除
- $Orderby 子句中的最大 32 字段
- 最大的搜索术语大小是 32766 个字节 (32 KB 减去 2 个字节) 的 utf-8 编码文本

##响应限制

- 每页的搜索结果返回的最大 1000年文档
- 每个建议的 API 请求返回的最大 100 建议


